---
import type { Locale } from "../i18n";

interface Props {
  title: string;
  locale: Locale;
}

const { title, locale } = Astro.props;
const base = import.meta.env.BASE_URL;
---

<!doctype html>
<html lang={locale}>
  <head>
    <meta charset="utf8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta property="og:title" content="Crash Party" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content={`${base}content/image/icon.png`} />
    <meta property="og:description" content="Crash Party" />
    <meta property="og:url" content="" />
    <link
      href={`${base}content/image/smile.png`}
      rel="shortcut icon"
      type="image/png"
    />
    <title>{title}</title>
  </head>
  <body class="column">
    <slot />
    <div id="video-toggle">Video ON</div>
  </body>
</html>

<style is:global>
  @import "../styles/global.css";

  #video-toggle {
    position: fixed;
    bottom: 12px;
    left: 12px;
    z-index: 999;
    background: black;
    color: white;
    font-size: 24px;
    line-height: 1;
    padding: 5px 10px;
    cursor: pointer;
    user-select: none;
  }
  #video-toggle:hover {
    color: black;
    background: white;
  }
</style>

<script>
  const toggle = document.getElementById("video-toggle")!;
  let playing = true;
  toggle.addEventListener("click", () => {
    playing = !playing;
    toggle.textContent = playing ? "Video ON" : "Video OFF";
    for (const video of document.querySelectorAll("video")) {
      playing ? video.play() : video.pause();
    }
  });
</script>
